<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Build a mirror/backup site for your own steem posts in 30 minutes - 30 分钟搭建自己的 steem 镜像备份网站 | STEEM@dapeng</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home|首页</a></li>
      
      <li><a href="/about/">About|关于</a></li>
      
      <li><a href="/categories/">Categories|类目</a></li>
      
      <li><a href="/tags/">Tags|标签</a></li>
      
      <li><a href="/index.xml">Subscribe|订阅</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Build a mirror/backup site for your own steem posts in 30 minutes - 30 分钟搭建自己的 steem 镜像备份网站</span></h1>
<h2 class="author">dapeng</h2>
<h2 class="date">2017-11-06 09:44 GMT</h2>
</div>

<main>


<p>原文链接: <a href="https://steemit.com/steemdev/@dapeng/build-a-mirror-backup-site-for-your-own-steem-posts-in-30-minutes-or-30-steem">steemit</a>, <a href="https://cnsteem.com/steemdev/@dapeng/build-a-mirror-backup-site-for-your-own-steem-posts-in-30-minutes-or-30-steem">cnsteem</a>, <a href="https://busy.org/steemdev/@dapeng/build-a-mirror-backup-site-for-your-own-steem-posts-in-30-minutes-or-30-steem">busy</a>, <a href="https://chainbb.com/steemdev/@dapeng/build-a-mirror-backup-site-for-your-own-steem-posts-in-30-minutes-or-30-steem">chainbb</a>, <a href="https://steemdb.com/steemdev/@dapeng/build-a-mirror-backup-site-for-your-own-steem-posts-in-30-minutes-or-30-steem">steemdb</a>, <a href="https://steemd.com/steemdev/@dapeng/build-a-mirror-backup-site-for-your-own-steem-posts-in-30-minutes-or-30-steem">steemd</a>, <a href="https://busy.org/steemdev/@dapeng/build-a-mirror-backup-site-for-your-own-steem-posts-in-30-minutes-or-30-steem">busy</a>, <a href="https://raw.githubusercontent.com/pzhaonet/steem_dapeng/master/content/post/build-a-mirror-backup-site-for-your-own-steem-posts-in-30-minutes-or-30-steem.md">markdown</a></p>

<p>Yesterday, I built two mirror sites for my steem posts (<a href="https://dapeng.netlify.com/">mirror 1</a>，<a href="https://steemit.netlify.com/">mirror 2</a>) as backups, which are synced automatically everyday, thanks to steemsql and steemdata. The mirror sites are very useful:</p>

<ol>
<li>for emergency, in case that steemit.com and busy.org are down,</li>
<li>as backups, in case that steemsql and steemdata are gone,</li>
<li>for revision, where the posts are allowed to be modified even after 7 days,</li>
<li>for more replies, thanks to disqus,</li>
<li>for a stable looking, no matter how the interface of steemit changes in the future, and</li>
<li>for fast browsing, especially when your posts are more than 100.</li>
</ol>

<p>Both of these sites are free of costs, and updated automatically.</p>

<p>How long does it take to build a site like them?</p>

<p>Following my steps, it takes less than half an hour, if you are an expert on R language. For newbies, it depends on how long it takes you to learn R. Anyway, you will save much time that I wasted in many failed attempts.</p>

<p><img src="https://steemitimages.com/DQmVGn1eWfueYNVC9Xw4Hy41F9xDPR16jdGojPCDcJsfVxv/mirror1.jpg" alt="mirror1.jpg" /></p>

<p>Here are the steps.</p>

<h3 id="build-a-hugo-site-with-r-blogdown">Build a Hugo site with R blogdown</h3>

<ol>
<li>Install R and RStudio.</li>
<li>Created a blogdown project from RStudio&rsquo;s menu.</li>
</ol>

<h3 id="download-your-posts-from-steemsql-or-steemdata">Download your posts from steemsql or steemdata</h3>

<ol>
<li>R RODBC can visit steemsql database, and R mongolite can visit steemdata database. Either is OK.</li>
<li>Download the target posts, and organize them into markdown files with R.</li>
<li>Copy the markdown files into the contents folder in your site folder.</li>
<li>Run the build_site() function in R blogdown.</li>
</ol>

<h3 id="publish-your-site-folder-to-github">Publish your site folder to Github</h3>

<p>Create a new repo on Github, and publish your site folder.</p>

<h3 id="deploy-with-netlify">Deploy with Netlify</h3>

<ol>
<li>Log in Netlify.com with your github account.</li>
<li>Created a new site, choose your site folder from github, and use hugo_0.19 as the command.</li>
<li>Wait seconds or minutes, and you can visit your mirror sites!</li>
</ol>

<h3 id="sync-automatically-everyday">Sync automatically everyday</h3>

<ol>
<li>Write a .bat script on Windows, or .sh script on Linux, to call your R script, which downloads the new posts, builds the site, and syncs with Github repo.</li>
<li>Use the task scheduler on Windows or crontab on Linux to run the .bat or .sh automatically everyday or every hour or whatever.</li>
</ol>

<p>That&rsquo;s all. Wish you success!</p>

<p><img src="https://steemitimages.com/DQmbNZ7kw2ynuig2qZjhmDPHKynQobL2iiSatQsGJgQJZiB/mirror2.jpg" alt="mirror2.jpg" /></p>

<p>昨天，我为自己在 steem 上发布的帖子制作了两个镜像网站（<a href="https://dapeng.netlify.com/">镜像1</a>，<a href="https://steemit.netlify.com/">镜像2</a>）。每天定时跟 steem 同步更新，作为备份用。</p>

<p>镜像网站的好处是：</p>

<ol>
<li>应急。万一 steemit.com、busy.org 等前端网站挂了，至少我自己的文章还能来镜像访问。</li>
<li>备份。有朝一日万一 steemsql 等数据库黄了，万一区块链挂了，我辛辛苦苦码出的文章还健在。</li>
<li>修改。steem 上的文章过了7天后就没法修改，而镜像网站的永远可以修改，可以精益求精。</li>
<li>评论。镜像网站上配置的是 disqus 评论系统，多引入一个评论方式。</li>
<li>美观。不管 steemit 等网站界面好看难看，我有一片独立的自留地。</li>
<li>快捷。找自己的文章时，再也不用往下拉，载入，等待，再拉，再载入，再等待……</li>
</ol>

<p>这两个镜像全部是免费搭建的，搭建完毕后就每天自动更新，不用再操心了。</p>

<p>那么，搭建一个这样的网站需要多久？</p>

<p>熟悉 R 语言的话，从零开始到成功访问，整个过程用不了半小时。如果是 R 语言的新手，那么主要取决于多久能学会 R。无论如何，我花了很多时间来尝试，才建立了下面的步骤，这个时间你可以省了。</p>

<p>搭建这两个网站，用的主要工具是 R 语言的 blogdown 包。大体流程是：用 R 语言在本地搭建一个 Hugo 框架的静态网站，然后同步到 GitHub，再由 Netlify 布署。</p>

<p>下面简要说说步骤。</p>

<h3 id="用-r-语言搭建-hugo-网站">用 R 语言搭建 Hugo 网站</h3>

<ol>
<li>先安装 R 语言和 RStudio。</li>
<li>从 RStudio 的菜单栏创建一个 blogdown 项目，选择中意的网站主题，用不了1分钟，一个静态的 HUGO 网站框架就搭建好了，所有文件都保存在本地的一个文件夹里。</li>
</ol>

<h3 id="用-r-语言从-steemsql-或-steemdata-下载帖子">用 R 语言从 steemsql 或 steemdata 下载帖子</h3>

<ol>
<li>如果访问 steemsql 数据库，请安装 R 语言的 RODBC 包；如果访问 steemdata 数据库，请安装 mongolite 包。两个数据库都可以提供 steem 上文章的所有信息。</li>
<li>从数据库将需要的帖子下载到本地，并整理成 markdown 格式的文本文件。</li>
<li>将文本文件拷贝到你的网站文件夹的 contents 里。</li>
<li>运行 R blogdown 的建站函数。</li>
</ol>

<h3 id="将网站文件夹发布到-github">将网站文件夹发布到 Github</h3>

<p>在 Github 上创建一个新的项目，将你的网站文件夹发布上去。</p>

<h3 id="用-netlify-布署">用 Netlify 布署</h3>

<p>用你的 Github 账号登陆 Netlify，创建一个新站点，选择你的网站文件夹，并用 hugo_0.19 作为布署命令。设置完毕后，短则几秒，长则几分钟，就可以访问你的镜像网站啦！</p>

<p>Netlify 提供免费的二级域名。当然，你也可以买个域名来绑定。</p>

<h3 id="每天自动同步">每天自动同步</h3>

<ol>
<li>编写一个批处理程序，来调用 R 代码，从而完成下载帖子、建站、与 GitHub 同步的工作。</li>
<li>用 Windows 的自动任务，每天自动运行上述批处理，就实现了每天自动同步。</li>
</ol>

<p>最近我在看美剧《西部世界》。我的机器人 @pzhao 可不能亏待，所以我为 @pzhao 也做了一个<a href="https://pz.netlify.com/">镜像</a>。</p>

<p><img src="https://steemitimages.com/DQmeYUwQ7Juorgd79o6D5E34BnUYxwfmLxYH4cApgPRhRf6/end2.jpg" alt="dapeng" /></p>

</main>

  <footer>
  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'pzhao';
    var disqus_identifier = 'https:\/\/steemit.netlify.com\/post\/build-a-mirror-backup-site-for-your-own-steem-posts-in-30-minutes-or-30-steem\/';
    var disqus_title = 'Build a mirror\/backup site for your own steem posts in 30 minutes - 30 分钟搭建自己的 steem 镜像备份网站';
    var disqus_url = 'https:\/\/steemit.netlify.com\/post\/build-a-mirror-backup-site-for-your-own-steem-posts-in-30-minutes-or-30-steem\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<script src="//yihui.name/js/math-code.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>

  
  <hr/>
  All rights reserved  &copy; <a href="https://steemit.com/@dapeng">dapeng</a> 2017</p>

<p>Powered by <a href="https://bookdown.org/yihui/blogdown/">R blogdown</a>, <a href="https://gohugo.io/">Hugo</a>, and <a href="https://github.com/yihui/hugo-xmin">Xmin</a>
  
  </footer>
  </body>
</html>

